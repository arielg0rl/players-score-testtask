{"version":3,"sources":["components/Description.tsx","components/Empty.tsx","components/PlayersList.tsx","App.tsx","index.js"],"names":["Description","player","ReactDom","createPortal","className","name","avatar","score","document","getElementById","Empty","PlayersList","onSelect","players","useState","sortBy","setSortBy","scoreLeader","setScoreLeader","addNewLeaderStyle","setAddNewLeaderStyle","useEffect","newBoard","sort","player1","player2","setTimeout","value","onChange","event","target","selected","a","b","localeCompare","map","i","style","textDecoration","to","onClick","classNames","length","src","alt","App","setPlayers","selectedPlayer","setSelectedPlayer","item","window","localStorage","getItem","prev","JSON","parse","stringify","setItem","EventSource","onmessage","data","playerFromEvent","path","element","ReactDOM","render","StrictMode"],"mappings":"oMAsBeA,EAb6B,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OAC7C,OAAOC,IAASC,aACd,8BACE,sBAAKC,UAAU,cAAf,UACE,8BAAMH,EAAOI,OACb,8BAAMJ,EAAOK,SACb,8BAAML,EAAOM,aAGjBC,SAASC,eAAe,Y,MChBrB,SAASC,IACd,OACE,8BACE,sBAAKN,UAAU,mBAAf,UACE,qBAAKA,UAAU,0BAAf,kCAGA,qBAAKA,UAAU,kD,qBCCVO,EAA+B,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,SAAUC,EAAc,EAAdA,QACvD,EAA8BC,mBAAiB,SAA/C,mBAAQC,EAAR,KAAgBC,EAAhB,KACA,EAAwCF,qBAAxC,mBAAQG,EAAR,KAAqBC,EAArB,KACA,EAAoDJ,oBAAkB,GAAtE,mBAAQK,EAAR,KAA2BC,EAA3B,KAEAC,qBAAU,WACR,IAAMC,EAAWT,EAAQU,MAAK,SAACC,EAASC,GAAV,OAAsBA,EAAQlB,MAAQiB,EAAQjB,SACxEe,EAAS,GAAGjB,QAAZ,OAAqBY,QAArB,IAAqBA,OAArB,EAAqBA,EAAaZ,OAItCa,EAAeI,EAAS,MACvB,CAACT,IAEJQ,qBAAU,WACRD,GAAqB,GAErBM,YAAW,WACTN,GAAqB,KACpB,OAEF,CAACH,IAMJ,OACE,sBAAKb,UAAU,cAAf,UACE,sBAAKA,UAAU,sBAAf,UACE,qBAAKA,UAAU,2BAAf,2BACA,yBACAA,UAAU,6BACRC,KAAK,UACLsB,MAAOZ,EACPa,SAZiB,SAACC,GACxBb,EAAUa,EAAMC,OAAOH,QAOnB,UAME,wBAAQA,MAAM,QAAQI,UAAQ,EAA9B,mBACA,wBAAQJ,MAAM,OAAd,yBAGS,UAAXZ,EAAqBF,EAAQU,MAAK,SAACS,EAAGC,GAAJ,OAAUA,EAAE1B,MAAQyB,EAAEzB,SACxDM,EAAQU,MAAK,SAACS,EAAGC,GAAJ,OAAUD,EAAE3B,KAAK6B,cAAcD,EAAE5B,UAC7C8B,KAAI,SAAClC,EAAQmC,GACZ,OACE,cAAC,IAAD,CAAMC,MAAO,CAAEC,eAAgB,QAAUC,GAAE,kBAAatC,EAAOI,MAA/D,SACE,sBACEmC,QAAS,WACP5B,EAASX,IAGXG,UAAWqC,IAAW,sBAAuB,CAAC,mCAAqCtB,GAA2B,IAANiB,GAAW,CAAC,0CAA+D,IAAnBvB,EAAQ6B,SAL1K,UAOA,sBAAKtC,UAAU,+BAAf,UACE,qBACEA,UAAU,6BACVuC,IAAK1C,EAAOK,OACZsC,IAAI,oBAEN,qBAAKxC,UAAU,2BAAf,SAA2CH,EAAOI,UAEpD,qBAAKD,UAAU,4BAAf,SAA4CH,EAAOM,UAX5CN,EAAOI,e,OCEbwC,EAnDc,WAC3B,MAAgC/B,mBAAoB,IAApD,mBAAQD,EAAR,KAAiBiC,EAAjB,KACA,EAA8ChC,qBAA9C,mBAAQiC,EAAR,KAAwBC,EAAxB,KAEA3B,qBAAU,WACR,IAAM4B,EAAOC,OAAOC,aAAaC,QAAQ,WACzCN,GAAW,SAACO,GAAD,OAAqBC,KAAKC,MAAMN,GAAcK,KAAKE,UAAUH,SACvE,IAEHhC,qBAAU,WACR6B,OAAOC,aAAaM,QAAQ,UAAWH,KAAKE,UAAU3C,MACrD,CAACA,IAEJQ,qBAAU,WACY,IAAIqC,YAAY,yBAExBC,UAAY,SAAS9B,GAC/BiB,GAAW,SAACO,GAAD,4BAAyBA,GAAzB,CAA+BC,KAAKC,MAAM1B,EAAM+B,cAE5D,IAMH,OACE,qBAAKxD,UAAU,UAAf,SACE,qBAAKA,UAAU,MAAf,SACE,sBAAKA,UAAU,YAAf,UACE,oBAAIA,UAAU,UAAd,yBAEGS,EAAQ6B,OAIT,cAAC,EAAD,CAAa9B,SAdF,SAACiD,GACpBb,EAAkBa,IAa2BhD,QAASA,IAF9C,cAACH,EAAD,IAIDqC,GACD,cAAC,IAAD,UACE,cAAC,IAAD,CACEe,KAAI,kBAAaf,EAAe1C,MAChC0D,QAAU,cAAC,EAAD,CAAa9D,OAAQ8C,gBC/C7CiB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,EAAD,QAIJ1D,SAASC,eAAe,W","file":"static/js/main.e0e6433a.chunk.js","sourcesContent":["import React, { } from \"react\";\nimport ReactDom from 'react-dom';\n// import { Link } from 'react-router-dom';\nimport { IPlayer } from \"../types\";\n\nexport interface Props {\n  player: IPlayer;\n}\n\nexport const Description: React.FC<Props> = ({ player }) => {\n  return ReactDom.createPortal(\n    <div>\n      <div className=\"description\">\n        <div>{player.name}</div>\n        <div>{player.avatar}</div>\n        <div>{player.score}</div>\n      </div>\n    </div>,\n    document.getElementById(\"portal\")!\n  )\n}\n\nexport default Description\n\n// Link to={`/player/${player.name}`}","import React from \"react\"\n\nexport function Empty() {\n  return (\n    <div>\n      <div className=\"EmptyplayersList\">\n        <div className=\"EmptyplayersList--empty\">\n          no players available\n        </div>\n        <div className=\"EmptyplayersList__loadIcon rotate-center\"></div>\n      </div>\n    </div>\n  )\n}\n\n","import React, { useEffect, useState } from \"react\"\nimport { IPlayer } from \"../types\"\nimport { Link } from 'react-router-dom';\nimport classNames from \"classnames\";\n\nexport interface Props {\n  players: IPlayer[];\n  onSelect: (playerFromEvent: IPlayer) => void;\n}\n\nexport const PlayersList: React.FC<Props> = ({ onSelect, players }) => {\n  const [ sortBy, setSortBy ] = useState<string>('Score');\n  const [ scoreLeader, setScoreLeader ] = useState<IPlayer>();\n  const [ addNewLeaderStyle, setAddNewLeaderStyle ] = useState<boolean>(false);\n\n  useEffect(() => {\n    const newBoard = players.sort((player1, player2) => player2.score - player1.score);\n    if (newBoard[0].name === scoreLeader?.name) {\n      return;\n    }\n\n    setScoreLeader(newBoard[0]);\n  }, [players])\n\n  useEffect(() => {\n    setAddNewLeaderStyle(true);\n\n    setTimeout(() => {\n      setAddNewLeaderStyle(false);\n    }, 1000)\n\n  }, [scoreLeader]);\n\n  const handleSortChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    setSortBy(event.target.value);\n  }\n\n  return (\n    <div className=\"playersList\">\n      <div className=\"playersList__header\">\n        <div className=\"playersList__header-name\">Player's name</div>\n        <select\n        className=\"playersList__header-select\"\n          name=\"Sort by\"\n          value={sortBy}\n          onChange={handleSortChange}\n        >\n          <option value=\"Score\" selected>Score</option>\n          <option value=\"Name\">Name</option>\n        </select>\n      </div>\n      {(sortBy === 'Score' ? players.sort((a, b) => b.score - a.score)\n      : players.sort((a, b) => a.name.localeCompare(b.name)))\n        .map((player, i) => {\n          return (\n            <Link style={{ textDecoration: 'none' }} to={`/player/${player.name}`}>\n              <div\n                onClick={(): void => {\n                  onSelect(player)\n                }}\n                key={player.name}\n                className={classNames('playersList__Player', {'playersList__Player--highlighted': (addNewLeaderStyle && i === 0)}, {'playersList__Player--highlighted--first': (players.length === 1)})}\n              >\n              <div className=\"playersList__Player-ava-name\">\n                <img\n                  className=\"playersList__Player-avatar\"\n                  src={player.avatar}\n                  alt=\"player's avatar\"\n                />\n                <div className=\"playersList__Player-name\">{player.name}</div>\n              </div>\n              <div className=\"playersList__Player-score\">{player.score}</div>\n              </div>\n            </Link>\n          )\n        })\n      }\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react';\nimport Description from './components/Description';\n\nimport './App.scss';\n\nimport { Empty } from './components/Empty';\nimport { PlayersList } from './components/PlayersList';\nimport { IPlayer } from './types';\nimport { Route, Routes } from 'react-router';\n\n\nexport const App: React.FC = () => {\n  const [ players, setPlayers ] = useState<IPlayer[]>([]);\n  const [ selectedPlayer, setSelectedPlayer ] = useState<IPlayer>()\n\n  useEffect(() => {\n    const item = window.localStorage.getItem('players');\n    setPlayers((prev: IPlayer[]) => JSON.parse(item ? item : JSON.stringify(prev)));\n  }, []);\n\n  useEffect(() => {\n    window.localStorage.setItem('players', JSON.stringify(players));\n  }, [players]);\n\n  useEffect(() => {\n    const eventSource = new EventSource('http://localhost:5000');\n\n    eventSource.onmessage = function(event) {\n      setPlayers((prev: IPlayer[]) => [...prev, JSON.parse(event.data)]);\n    }\n  }, [])\n\n  const choosePlayer = (playerFromEvent: IPlayer): void => {\n    setSelectedPlayer(playerFromEvent);\n  }\n\n  return (\n    <div className=\"wrapper\">\n      <div className=\"App\">\n        <div className=\"container\">\n          <h1 className=\"App__h1\">Score board</h1>\n          {\n            !players.length\n            ?\n            <Empty />\n            :\n            <PlayersList onSelect={choosePlayer} players={players}/>\n          }\n          {selectedPlayer && (\n          <Routes>\n            <Route\n              path={`/player/${selectedPlayer.name}`}\n              element={(<Description player={selectedPlayer as IPlayer} />)}\n            />\n          </Routes>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport App from './App.tsx';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n\n  document.getElementById('root')\n);\n"],"sourceRoot":""}