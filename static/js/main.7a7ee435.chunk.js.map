{"version":3,"sources":["components/Empty.tsx","components/Description.tsx","components/PlayersList.tsx","App.tsx","index.js"],"names":["Empty","className","Description","player","ReactDom","createPortal","to","name","avatar","score","document","getElementById","PlayersList","players","useState","sortBy","setSortBy","scoreLeader","setScoreLeader","addNewLeaderStyle","setAddNewLeaderStyle","showModal","setShowModal","clickedPlayer","setClickedPlayer","useEffect","newBoard","sort","player1","player2","setTimeout","value","onChange","event","target","selected","a","b","localeCompare","map","i","style","textDecoration","onClick","classNames","src","alt","App","setPlayers","console","log","length","item","window","localStorage","getItem","prev","JSON","parse","stringify","setItem","EventSource","onmessage","data","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.7a7ee435.chunk.js","sourcesContent":["import React from \"react\"\n\nexport function Empty() {\n  return (\n    <div>\n      <div className=\"EmptyplayersList\">\n        <div className=\"EmptyplayersList--empty\">\n          no players available\n        </div>\n        <div className=\"EmptyplayersList__loadIcon rotate-center\"></div>\n      </div>\n    </div>\n  )\n}\n\n","import React, { } from \"react\";\nimport ReactDom from 'react-dom';\nimport { Link } from 'react-router-dom';\nimport { IPlayer } from \"../types\";\n\nexport interface Props {\n  player: IPlayer | null;\n}\n\nexport const Description: React.FC<Props> = ({ player }) => {\n  return ReactDom.createPortal(\n    player &&\n    <Link to={player ? `/player/${player.name}` : '/'}>\n      <div className=\"description\">\n        <div>{player.name}</div>\n        <div>{player.avatar}</div>\n        <div>{player.score}</div>\n      </div>\n    </Link>,\n    document.getElementById(\"portal\")!\n  )\n}\n\nexport default Description","import React, { useEffect, useState } from \"react\"\nimport { IPlayer } from \"../types\"\nimport { Link } from 'react-router-dom';\nimport classNames from \"classnames\";\nimport Description from \"./Description\";\nimport Modal from 'react-modal';\n\nexport interface Props {\n  players: IPlayer[];\n}\n\nexport const PlayersList: React.FC<Props> = ({ players }) => {\n  const [ sortBy, setSortBy ] = useState<string>('Score');\n  const [ scoreLeader, setScoreLeader ] = useState<IPlayer>();\n  const [ addNewLeaderStyle, setAddNewLeaderStyle ] = useState<boolean>(false);\n  const [ showModal, setShowModal ] = useState(false);\n  const [ clickedPlayer, setClickedPlayer ] = useState<IPlayer>();\n\n  useEffect(() => {\n    const newBoard = players.sort((player1, player2) => player1.score - player2.score);\n    if (newBoard[0].name === scoreLeader?.name) {\n      return;\n    }\n\n    setScoreLeader(newBoard[0]);\n  }, [players])\n\n  useEffect(() => {\n    setAddNewLeaderStyle(true);\n\n    setTimeout(() => {\n      setAddNewLeaderStyle(false);\n    }, 1000)\n\n  }, [scoreLeader]);\n\n  const handleSortChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    setSortBy(event.target.value);\n  }\n\n  return (\n    <div className=\"playersList\">\n      <div className=\"playersList__header\">\n        <div className=\"playersList__header-name\">Player's name</div>\n        <select\n        className=\"playersList__header-select\"\n          name=\"Sort by\"\n          value={sortBy}\n          onChange={handleSortChange}\n        >\n          <option value=\"Score\" selected>Score</option>\n          <option value=\"Name\">Name</option>\n        </select>\n      </div>\n      {(sortBy === 'Score' ? players.sort((a, b) => b.score - a.score)\n      : players.sort((a, b) => a.name.localeCompare(b.name)))\n        .map((player, i) => {\n          return (\n            <Link style={{ textDecoration: 'none' }} to={`/player/${player.name}`}>\n              <div\n                onClick={(): void => {\n                  setShowModal(true)\n                  setClickedPlayer(player)\n                }}\n                key={player.name}\n                className={classNames('playersList__Player', {'playersList__Player--highlighted': (addNewLeaderStyle && i === 0)})}\n              >\n              <div className=\"playersList__Player-ava-name\">\n                <img\n                  className=\"playersList__Player-avatar\"\n                  src={player.avatar}\n                  alt=\"player's avatar\"\n                />\n                <div className=\"playersList__Player-name\">{player.name}</div>\n              </div>\n              <div className=\"playersList__Player-score\">{player.score}</div>\n              </div>\n            </Link>\n          )\n        })\n      }\n      {showModal &&\n      <Modal>\n        <Description player={clickedPlayer ? clickedPlayer : null} />\n      </Modal>\n      }\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react';\n\nimport './App.scss';\n\nimport { Empty } from './components/Empty';\nimport { PlayersList } from './components/PlayersList';\nimport { IPlayer } from './types';\n\nexport const App: React.FC = () => {\n  const [ players, setPlayers ] = useState<IPlayer[]>([]);\n  console.log(players.length);\n\n  useEffect(() => {\n    const item = window.localStorage.getItem('players');\n    setPlayers((prev: IPlayer[]) => JSON.parse(item ? item : JSON.stringify(prev)));\n  }, []);\n\n  useEffect(() => {\n    window.localStorage.setItem('players', JSON.stringify(players));\n  }, [players]);\n\n  useEffect(() => {\n    const eventSource = new EventSource('http://localhost:5000');\n\n    eventSource.onmessage = function(event) {\n      setPlayers((prev: IPlayer[]) => [...prev, JSON.parse(event.data)]);\n    }\n  }, [])\n\n  return (\n    <div className=\"wrapper\">\n      <div className=\"App\">\n        <div className=\"container\">\n          <h1 className=\"App__h1\">Score board</h1>\n          {\n            !players.length\n            ?\n            <Empty />\n            :\n            <PlayersList players={players}/>\n          }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport App from './App.tsx';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n\n  document.getElementById('root')\n);\n"],"sourceRoot":""}